{"ts":1373773440381,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// Get the lib\r\nvar irc = require(\"irc\");\r\nvar request = require('request');\r\nvar moment = require('moment');\r\nvar parseString = require('xml2js').parseString;\r\nvar googleapis = require('googleapis');\r\nvar db = require('node-persist');\r\n\r\n\r\n//Google API key\r\nvar key = 'AIzaSyDPlGenbEo8T-sbeNHx_shvJSRCwOpCESc';\r\n\r\nvar ip = 'http://198.211.99.242:8020/';\r\nvar chan = '#SonicRadioboom';\r\n\r\nvar now = new moment();\r\ndb.initSync();\r\nif (!db.getItem('ElectricErger'.substring(0,12))) {\r\n    db.setItem('ElectricErger'.substring(0,12), now);\r\n}\r\nif (!db.getItem('linaea'.substring(0,12))) {\r\n    db.setItem('linaea'.substring(0,12), now);\r\n}\r\nvar current;\r\nrequest(ip+'stats?sid=1', function (error, response, body) {\r\n    if (!error && response.statusCode == 200) {\r\n        parseString(body, function (err, result) {\r\n            current = result;\r\n        });\r\n    }\r\n});\r\n\r\n// Create the configuration\r\nvar config = {\r\n    channels: [chan],\r\n\tserver: \"irc.canternet.org\",\r\n\tbotName: \"Sonia\",\r\n    floodProtection: true,\r\n};\r\n\r\nvar notify = true;\r\n\r\n// Create the bot name\r\nvar sonia = new irc.Client(config.server, config.botName, {\r\n    channels: config.channels\r\n});\r\n\r\nsonia.addListener('message', function (from, to, message) {\r\n    // console.log(from + ' => ' + to + ': ' + message);\r\n    // if (message.match('bot')) sonia.say(from, \"I heard that!\");\r\n    if (message.match('Sonia: ')||message.match('^!')) {\r\n    // request('http://198.211.99.242:2199/api.php?xm=server.getstatus&f=json&a[username]=json&a[password]=secret', function (error, response, body) {http://198.211.99.242:8020/currentsong?sid=1\r\n        // sonia.action(chan, 'Pokes '+from);\r\n        var begin = message.match('(Sonia: |!)')[1];\r\n        message = message.match('(?:Sonia: |!)(.*)')[1];\r\n        if (message.match('^s(?:ong| |$)')) {\r\n            sonia.say(chan, 'Current Song: '+current.SHOUTCASTSERVER.SONGTITLE);\r\n        } else if (message.match('^l(?:isteners| |$)')) {\r\n            sonia.say(chan, 'Listeners: '+current.SHOUTCASTSERVER.CURRENTLISTENERS);\r\n        } else if (message.match('^lo(?:gin| |$)') && message.match(' (.*)')) {\r\n            sonia.say(chan, \"Last login by \"+message.match(' (.*)')[1]+\": \"+moment(db.getItem(message.match(' (.*)')[1].substring(0,12))).fromNow());\r\n        } else  if (message.match('^\\\\?')) {\r\n            sonia.say(chan,\r\n            'Commands: [s]ong, [l]isteners, [lo]gin, [h]ug, [p]oke, @add, [g]etdata, [n]ext, @[no]tify');\r\n        } else if (message.match('^no(?:tify| |$)')) {\r\n            sonia.whois(from, function (info) {\r\n                if (info.channels.indexOf('@#SonicRadioboom') >= 0 || info.channels.indexOf('~#SonicRadioboom') >= 0 || info.channels.indexOf('%#SonicRadioboom') >= 0) {\r\n                    notify = !notify;\r\n                    sonia.say(chan, 'Notifications '+(notify?'on':'off'));\r\n                } else {\r\n                    console.log(info);\r\n                    sonia.say(from, 'You\\'re not an OP, I don\\'t trust you ...');\r\n                }\r\n            });\r\n\r\n        } else if (message.match('^h(?:ug| |$)')) {\r\n            sonia.action(chan, ' hugs '+from);\r\n        } else if (message.match('^p(?:oke| |$)') && message.match(' (.*)')) {\r\n            sonia.action(chan, ' pokes '+message.match(' (.*)')[1]);\r\n        } else if (message.match('^a(?:dd| |$)') && message.match(' (.*)')) {\r\n            sonia.whois(from, function (info) {\r\n                if (info.channels.indexOf('@#SonicRadioboom') >= 0 || info.channels.indexOf('~#SonicRadioboom') >= 0 || info.channels.indexOf('%#SonicRadioboom') >= 0) {\r\n                    db.setItem(current.SHOUTCASTSERVER.SONGTITLE+\"\", message.match(' (.*)')[1]);\r\n                    sonia.say(from, 'Set record for '+current.SHOUTCASTSERVER.SONGTITLE+' to '+db.getItem(current.SHOUTCASTSERVER.SONGTITLE));\r\n                } else {\r\n                    sonia.say(from, 'You\\'re not an OP, I don\\'t trust you ...');\r\n                }\r\n            });\r\n        } else if (message.match('^s(?:ay| |$)') && message.match(' (.*)')) {\r\n            sonia.whois(from, function (info) {\r\n                if (info.channels.indexOf('@#SonicRadioboom') >= 0 || info.channels.indexOf('~#SonicRadioboom') >= 0 || info.channels.indexOf('%#SonicRadioboom') >= 0) {\r\n                    sonia.say(chan, message.match(' (.*)')[1]);\r\n                } else {\r\n                    sonia.say(from, 'You\\'re not an OP, I don\\'t trust you ...');\r\n                }\r\n            });\r\n        } else if (message.match('^g(?:etdata| |$)')) {\r\n            sonia.say(chan, from+': Does this help? '+current.SHOUTCASTSERVER.SONGTITLE+' is '+db.getItem(current.SHOUTCASTSERVER.SONGTITLE+\"\"));\r\n        } else if (message.match('^n(?:ext| |$)')) {\r\n            googleapis.discover('calendar', 'v3').execute(function(err, client) {\r\n                var moments = message.match(' (.*)');\r\n                if (moments) {\r\n                    moments = moment(moments[1]);\r\n                    moments = moments.isValid()?moments:moment();\r\n                } else {\r\n                    moments = moment();\r\n                }\r\n                var params = {\r\n                      calendarId: 'sonicradioboom2013@gmail.com',\r\n                      maxResults: 1,\r\n                      timeMin: moments,\r\n                      singleEvents: true,\r\n                      orderBy: \"startTime\",\r\n                      };\r\n                client.calendar.events.list(params).withApiKey(key).execute(function (err, response) {\r\n                    response.items.forEach(function (item,a,b) {sonia.say(chan, 'Next event is '+item.summary+' '+moment(item.start.dateTime).fromNow());});\r\n                })});\r\n        } else if (message=='PLEASE QUIT NAO') {\r\n            process.exit();\r\n        } else if (begin!='!') {\r\n            if (to!=config.botName) {\r\n                sonia.say(chan, message+' to you, too, '+from);\r\n            } else {\r\n                sonia.say(from, message+' to you, too, '+from);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nsetInterval(function() {\r\n    request(ip+'stats?sid=1', function (error, response, body) {\r\n        if (!error && response.statusCode == 200) {\r\n            parseString(body, function (err, result) {\r\n                if (notify && current && (JSON.stringify(current.SHOUTCASTSERVER.SONGTITLE) != JSON.stringify(result.SHOUTCASTSERVER.SONGTITLE))) {\r\n                    sonia.say(chan, 'New Song: '+result.SHOUTCASTSERVER.SONGTITLE);\r\n                }\r\n                current = result;\r\n            });\r\n        }\r\n    });\r\n}, 1000);\r\n\r\nsonia.addListener('join', function(channel, nick, message) {\r\n    if (channel==chan && nick!=config.botName) {\r\n        sonia.say(chan, 'Hello '+nick+\"!\");\r\n        var record = db.getItem(nick.substring(0,12));\r\n        if (record) {\r\n            sonia.say(chan, 'Welcome back! Last login: '+moment(record).fromNow()+\".\");\r\n            \r\n        } else {\r\n            sonia.say(chan, 'Haven\\'t seen you around before, care to introduce yourself?');\r\n            sonia.say(nick, 'Welcome to #'+chan+'! The radio stream is available at http://thunderlane.ponyvillelive.com/~srb/.');\r\n        }\r\n        db.setItem(nick.substring(0,12), moment());\r\n    }\r\n});\r\n\r\nsonia.addListener('quit', function(channel, nick, message) {\r\n    if (channel==chan && nick!=config.botName) {\r\n        db.setItem(nick.substring(0,12), moment());\r\n    }\r\n});\r\n\r\nsonia.addListener('error', function(message) {\r\n    console.log('error: ', message);\r\n});\r\n"]],"start1":0,"start2":0,"length1":0,"length2":7506}]],"length":7506}
{"contributors":[],"silentsave":false,"ts":1373800904025,"patch":[[{"diffs":[[0,"t event "],[-1,"i"],[1,"start"],[0,"s '+item"]],"start1":5595,"start2":5595,"length1":17,"length2":21}]],"length":7510,"saved":false}
{"ts":1373803504653,"patch":[[{"diffs":[[0,"\n});\r\n\r\n"],[1,"setInterval(function(){client.send('PONG', 'empty');}, 5*60*1000);\r\n\r\n"],[0,"setInter"]],"start1":6032,"start2":6032,"length1":16,"length2":86}]],"length":7580,"saved":false}
{"ts":1373805806342,"patch":[[{"diffs":[[0,"ction(){"],[-1,"client"],[1,"sonia"],[0,".send('P"]],"start1":6055,"start2":6055,"length1":22,"length2":21}]],"length":7579,"saved":false}
{"ts":1373806033024,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"setInterval(function(){sonia.send('PONG', 'empty');}, 5*60*1000);\r\n\r\n"],[0,"setI"]],"start1":6036,"start2":6036,"length1":77,"length2":8}]],"length":7510,"saved":false}
{"contributors":[],"silentsave":false,"ts":1373808903665,"patch":[[{"diffs":[[0,"chan],\r\n"],[-1,"\t"],[1,"    "],[0,"server: "]],"start1":933,"start2":933,"length1":17,"length2":20}]],"length":7513,"saved":false}
{"ts":1373809262462,"patch":[[{"diffs":[[0,"otify = "],[-1,"tru"],[1,"fals"],[0,"e;\r\n\r\n//"]],"start1":1034,"start2":1034,"length1":19,"length2":20}]],"length":7514,"saved":false}
{"ts":1373810167710,"patch":[[{"diffs":[[0,"h('^"],[-1,"\\\\?"],[1,"(?:\\\\?|help|command)"],[0,"')) "]],"start1":2313,"start2":2313,"length1":11,"length2":28}]],"length":7531,"saved":false}
{"ts":1373810906027,"patch":[[{"diffs":[[0,"hannels\r\n});\r\n\r\n"],[1,"sonia.say('linaea', 'Started Sonia '+require('./package.json').version)\r\n\r\n"],[0,"sonia.addListene"]],"start1":1159,"start2":1159,"length1":32,"length2":107}]],"length":7606,"saved":false}
{"ts":1373811162060,"patch":[[{"diffs":[[0,"version)"],[1,";"],[0,"\r\n\r\nsoni"]],"start1":1238,"start2":1238,"length1":16,"length2":17}]],"length":7607,"saved":false}
{"ts":1373811190150,"patch":[[{"diffs":[[0," {\r\n"],[-1,"    if (channel==chan && nick!=config.botName) {\r\n    "],[0,"    "]],"start1":7395,"start2":7395,"length1":62,"length2":8},{"diffs":[[0,"2), moment());\r\n"],[-1,"    }\r\n"],[0,"});\r\n\r\nsonia.add"]],"start1":7432,"start2":7432,"length1":39,"length2":32}]],"length":7546,"saved":false}
{"ts":1373813049368,"patch":[[{"diffs":[[0,"    "],[-1,"sonia.say(chan, from+': Does this help? '+current.SHOUTCASTSERVER.SONGTITLE+' is '+db.getItem("],[1,"var data = db.getItem((message.match(' (.*)')?message.match(' (.*)')[1]:current.SHOUTCASTSERVER.SONGTITLE)+\"\");\r\n            if (!data) {\r\n                googleapis.discover('youtube', 'v3').execute(function(err, client) {\r\n                    var moments = message.match(' (.*)');\r\n                    if (moments) {\r\n                        moments = moment(moments[1]);\r\n                        moments = moments.isValid()?moments:moment();\r\n                    } else {\r\n                        moments = moment();\r\n                    }\r\n                    var params = {\r\n                          maxResults: 1,\r\n                          q: (message.match(' (.*)')?message.match(' (.*)')[1]:current.SHOUTCASTSERVER.SONGTITLE),\r\n                          order: 'rating',\r\n                          part: 'snippet',\r\n                          };\r\n                    client.youtube.list(params).withApiKey(key).execute(function (err, response) {\r\n                        response.items.forEach(function (item,a,b) {\r\n                            sonia.say(chan, from+': Does this help? '+current.SHOUTCASTSERVER.SONGTITLE+' might be http://www.youtube.com/watch?v='+item.id.videoId);\r\n                            });\r\n                    })});\r\n            } else {\r\n                sonia.say(chan, from+': Does this help? '+"],[0,"curr"]],"start1":4645,"start2":4645,"length1":102,"length2":1341},{"diffs":[[0,"TLE+"],[-1,"\"\"));"],[1,"' is '+data);\r\n            }"],[0,"\r\n  "]],"start1":6012,"start2":6012,"length1":13,"length2":36}]],"length":8808,"saved":false}
{"ts":1373813111499,"patch":[[{"diffs":[[0," client."],[-1,"youtube"],[1,"search"],[0,".list(pa"]],"start1":5524,"start2":5524,"length1":23,"length2":22}]],"length":8807,"saved":false}
{"ts":1373813212011,"patch":[[{"diffs":[[0,"            };\r\n"],[1,"                          console.log(client);\r\n"],[0,"                "]],"start1":5489,"start2":5489,"length1":32,"length2":80}]],"length":8855,"saved":false}
{"ts":1373813263961,"patch":[[{"diffs":[[0,"                "],[-1,"  "],[0,"maxResults: 1,\r\n"]],"start1":5237,"start2":5237,"length1":34,"length2":32},{"diffs":[[0,"maxResults: 1,\r\n"],[-1,"  "],[0,"                "]],"start1":5253,"start2":5253,"length1":34,"length2":32},{"diffs":[[0,"            "],[-1,"  "],[0,"order: 'rati"]],"start1":5395,"start2":5395,"length1":26,"length2":24},{"diffs":[[0," 'rating',\r\n"],[-1,"  "],[0,"            "]],"start1":5413,"start2":5413,"length1":26,"length2":24},{"diffs":[[0,"'snippet',\r\n"],[-1,"  "],[0,"            "]],"start1":5455,"start2":5455,"length1":26,"length2":24}]],"length":8845,"saved":false}
{"ts":1373813280124,"patch":[[{"diffs":[[0," client."],[1,"youtube."],[0,"search.l"]],"start1":5562,"start2":5562,"length1":16,"length2":24}]],"length":8853,"saved":false}
{"ts":1373813299838,"patch":[[{"diffs":[[0,"            "],[1," //"],[0," order: 'rat"]],"start1":5394,"start2":5394,"length1":24,"length2":27}]],"length":8856,"saved":false}
{"ts":1373813469635,"patch":[[{"diffs":[[0," current"],[1,", rem"],[0,";\r\nreque"]],"start1":641,"start2":641,"length1":16,"length2":21},{"diffs":[[0,".videoId);\r\n"],[1,"                            rem = 'http://www.youtube.com/watch?v='+item.id.videoId;\r\n"],[0,"            "]],"start1":5883,"start2":5883,"length1":24,"length2":110}]],"length":8947,"saved":false}
{"ts":1373813657007,"patch":[[{"diffs":[[0,"tch("],[-1,"'bot'"],[1,"/bot/i"],[0,")) s"]],"start1":1396,"start2":1396,"length1":13,"length2":14},{"diffs":[[0,"tch("],[-1,"'"],[1,"/"],[0,"Sonia: "],[-1,"'"],[1,"/i"],[0,")||m"]],"start1":1462,"start2":1462,"length1":17,"length2":18},{"diffs":[[0,"tch("],[-1,"'^!'"],[1,"/^!/i"],[0,")) {"]],"start1":1489,"start2":1489,"length1":12,"length2":13},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"(Sonia: "]],"start1":1773,"start2":1773,"length1":17,"length2":17},{"diffs":[[0,"nia: |!)"],[-1,"'"],[1,"/i"],[0,")[1];\r\n "]],"start1":1785,"start2":1785,"length1":17,"length2":18},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"(?:Sonia"]],"start1":1826,"start2":1826,"length1":17,"length2":17},{"diffs":[[0,"nia: |!)(.*)"],[-1,"'"],[1,"/i"],[0,")[1];\r\n     "]],"start1":1840,"start2":1840,"length1":25,"length2":26},{"diffs":[[0,"ssage.match("],[-1,"'"],[1,"/"],[0,"^s(?:ong| |$"]],"start1":1875,"start2":1875,"length1":25,"length2":25},{"diffs":[[0,"s(?:ong| |$)"],[-1,"'"],[1,"/i"],[0,")) {\r\n      "]],"start1":1889,"start2":1889,"length1":25,"length2":26},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^l(?:ist"]],"start1":2016,"start2":2016,"length1":17,"length2":17},{"diffs":[[0,"steners| |$)"],[-1,"'"],[1,"/i"],[0,")) {\r\n      "]],"start1":2031,"start2":2031,"length1":25,"length2":26},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^lo(?:gi"]],"start1":2162,"start2":2162,"length1":17,"length2":17},{"diffs":[[0,"o(?:gin| |$)"],[-1,"'"],[1,"/i"],[0,") && message"]],"start1":2173,"start2":2173,"length1":25,"length2":26},{"diffs":[[0,"& message.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")) {\r\n          "]],"start1":2190,"start2":2190,"length1":39,"length2":40},{"diffs":[[0,"ssage.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")[1]+\": \"+mo"]],"start1":2267,"start2":2267,"length1":31,"length2":32},{"diffs":[[0,"ssage.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")[1].substri"]],"start1":2317,"start2":2317,"length1":31,"length2":32},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^(?:\\\\?|"]],"start1":2399,"start2":2399,"length1":17,"length2":17},{"diffs":[[0,"command)"],[-1,"'"],[1,"/i"],[0,")) {\r\n  "]],"start1":2421,"start2":2421,"length1":17,"length2":18},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^no(?:ti"]],"start1":2598,"start2":2598,"length1":17,"length2":17},{"diffs":[[0,"(?:tify| |$)"],[-1,"'"],[1,"/i"],[0,")) {\r\n      "]],"start1":2610,"start2":2610,"length1":25,"length2":26},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^h(?:ug|"]],"start1":3177,"start2":3177,"length1":17,"length2":17},{"diffs":[[0,"^h(?:ug| |$)"],[-1,"'"],[1,"/i"],[0,")) {\r\n      "]],"start1":3186,"start2":3186,"length1":25,"length2":26},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^p(?:oke"]],"start1":3279,"start2":3279,"length1":17,"length2":17},{"diffs":[[0,"p(?:oke| |$)"],[-1,"'"],[1,"/i"],[0,") && message"]],"start1":3289,"start2":3289,"length1":25,"length2":26},{"diffs":[[0,"& message.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")) {\r\n          "]],"start1":3306,"start2":3306,"length1":39,"length2":40},{"diffs":[[0,"'+message.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")[1]);\r\n        "]],"start1":3375,"start2":3375,"length1":39,"length2":40},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^a(?:dd|"]],"start1":3432,"start2":3432,"length1":17,"length2":17},{"diffs":[[0,"^a(?:dd| |$)"],[-1,"'"],[1,"/i"],[0,") && message"]],"start1":3441,"start2":3441,"length1":25,"length2":26},{"diffs":[[0,"& message.match("],[-1,"' (.*)'"],[1,"/ (.*)/i)) {\r\n            sonia.whois(from, function (info) {\r\n                if (info.channels.indexOf('@#SonicRadioboom') >= 0 || info.channels.indexOf('~#SonicRadioboom') >= 0 || info.channels.indexOf('%#SonicRadioboom') >= 0) {\r\n                    db.setItem(current.SHOUTCASTSERVER.SONGTITLE+\"\", message.match(/ (.*)/i)[1]);\r\n                    sonia.say(from, 'Set record for '+current.SHOUTCASTSERVER.SONGTITLE+' to '+db.getItem(current.SHOUTCASTSERVER.SONGTITLE));\r\n                } else {\r\n                    sonia.say(from, 'You\\'re not an OP, I don\\'t trust you ...');\r\n                }\r\n            });\r\n        } else if (message.match(/^y(?:es, add it)/i"],[0,")) {\r\n          "]],"start1":3458,"start2":3458,"length1":39,"length2":706},{"diffs":[[0,", message.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")[1]);\r\n        "]],"start1":4441,"start2":4441,"length1":39,"length2":40},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^s(?:ay|"]],"start1":4787,"start2":4787,"length1":17,"length2":17},{"diffs":[[0,":ay| |$)"],[-1,"'"],[1,"/i"],[0,") && mes"]],"start1":4800,"start2":4800,"length1":17,"length2":18},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")) {\r\n  "]],"start1":4821,"start2":4821,"length1":23,"length2":24},{"diffs":[[0,"ssage.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")[1]);\r\n    "]],"start1":5101,"start2":5101,"length1":31,"length2":32},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^g(?:etd"]],"start1":5299,"start2":5299,"length1":17,"length2":17},{"diffs":[[0,":etdata| |$)"],[-1,"'"],[1,"/i"],[0,")) {\r\n      "]],"start1":5312,"start2":5312,"length1":25,"length2":26},{"diffs":[[0,"((message.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")?message.match("]],"start1":5365,"start2":5365,"length1":39,"length2":40},{"diffs":[[0,")?message.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")[1]:current.SHO"]],"start1":5389,"start2":5389,"length1":39,"length2":40},{"diffs":[[0,"= message.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,");\r\n            "]],"start1":5603,"start2":5603,"length1":39,"length2":40},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")?messag"]],"start1":6001,"start2":6001,"length1":23,"length2":24},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,")[1]:cur"]],"start1":6025,"start2":6025,"length1":23,"length2":24},{"diffs":[[0,"e.match("],[-1,"'"],[1,"/"],[0,"^n(?:ext"]],"start1":6905,"start2":6905,"length1":17,"length2":17},{"diffs":[[0,"ext| |$)"],[-1,"'"],[1,"/i"],[0,")) {\r\n  "]],"start1":6919,"start2":6919,"length1":17,"length2":18},{"diffs":[[0,"tch("],[-1,"'"],[1,"/"],[0," (.*)"],[-1,"'"],[1,"/i"],[0,");\r\n"]],"start1":7058,"start2":7058,"length1":15,"length2":16}]],"length":9644,"saved":false}
{"ts":1373813821297,"patch":[[{"diffs":[[0,"match(/^"],[-1,"(?:"],[0,"\\\\?|help"]],"start1":2401,"start2":2401,"length1":19,"length2":16},{"diffs":[[0,"|command"],[-1,")"],[0,"/i)) {\r\n"]],"start1":2417,"start2":2417,"length1":17,"length2":16}]],"length":9640,"saved":false}
{"ts":1373813892574,"patch":[[{"diffs":[[0,")/i)"],[-1," && message.match(/ (.*)/i"],[0,")) {"]],"start1":3448,"start2":3448,"length1":34,"length2":8},{"diffs":[[0,"R.SONGTITLE+\"\", "],[1,"(message.match(/ (.*)/i)?"],[0,"message.match(/ "]],"start1":3731,"start2":3731,"length1":32,"length2":57},{"diffs":[[0,"tch(/ (.*)/i)[1]"],[1,":rem)"],[0,");\r\n            "]],"start1":3782,"start2":3782,"length1":32,"length2":37}]],"length":9644,"saved":false}
{"ts":1373813909478,"patch":[[{"diffs":[[0," |$)/i))"],[-1,")"],[0," {\r\n    "]],"start1":3445,"start2":3445,"length1":17,"length2":16}]],"length":9643,"saved":false}
{"ts":1373814005136,"patch":[[{"diffs":[[0,"h(/^"],[-1,"\\\\?"],[0,"|hel"]],"start1":2405,"start2":2405,"length1":11,"length2":8},{"diffs":[[0,"mmand/i)"],[1," || message == '?'"],[0,") {\r\n   "]],"start1":2417,"start2":2417,"length1":16,"length2":34}]],"length":9658,"saved":false}
{"ts":1373814110561,"patch":[[{"diffs":[[0,"match(/^"],[-1,"|"],[0,"help|com"]],"start1":2401,"start2":2401,"length1":17,"length2":16}]],"length":9657,"saved":false}
{"ts":1373814257060,"patch":[[{"diffs":[[0,"\"\", "],[-1,"message.match(/ (.*)/i)[1]"],[1,"rem"],[0,");\r\n"]],"start1":4452,"start2":4452,"length1":34,"length2":11}]],"length":9634,"saved":false}
{"ts":1373814705736,"patch":[[{"diffs":[[0,"in!='!') {\r\n"],[1,"            if (message.match(/thank you/i)) {\r\n                message = 'No problem!';\r\n            } else {\r\n                message = message+' you, too, '+from;\r\n            }\r\n"],[0,"            "]],"start1":7982,"start2":7982,"length1":24,"length2":206},{"diffs":[[0," message"],[-1,"+' to you, too, '+from"],[0,");\r\n    "]],"start1":8246,"start2":8246,"length1":38,"length2":16},{"diffs":[[0,"sage"],[-1,"+' to you, too, '+from"],[0,");\r\n"]],"start1":8315,"start2":8315,"length1":30,"length2":8}]],"length":9772,"saved":false}
{"ts":1373814997340,"patch":[[{"diffs":[[0,"      } else {\r\n"],[1,"                var match = false;\r\n                db.get('calls').keys.forEach(function (item, a, b) {\r\n                    if (message.match(item)) {\r\n                        match = true;\r\n                        var response = db.get('calls').getItem(item);\r\n                        message.replace(/<from>/g, from);\r\n                        message.replace(/<feeling>/g, feeling);\r\n                    }\r\n                }\r\n                if (!match) {\r\n    "],[0,"                "]],"start1":8090,"start2":8090,"length1":32,"length2":497},{"diffs":[[0,"+from;\r\n"],[1,"                }\r\n"],[0,"        "]],"start1":8618,"start2":8618,"length1":16,"length2":35}]],"length":10256,"saved":false}
{"ts":1373815013488,"patch":[[{"diffs":[[0,"               }"],[1,");"],[0,"\r\n              "]],"start1":8518,"start2":8518,"length1":32,"length2":34}]],"length":10258,"saved":false}
{"ts":1373815020486,"patch":[[{"diffs":[[0,"    "],[-1,"var respons"],[1,"messag"],[0,"e = "]],"start1":8319,"start2":8319,"length1":19,"length2":14}]],"length":10253,"saved":false}
{"ts":1373815498043,"patch":[[{"diffs":[[0,", rem;\r\n"],[1,"var feeling = 'like a robot';\r\n"],[0,"request("]],"start1":649,"start2":649,"length1":16,"length2":47},{"diffs":[[0,"           });\r\n"],[1,"        } else if (message.match(/^w(?:hen) \\[(.*?)\\],? s(?:ay) ? \\[(.*?)\\]/i)) {\r\n            var match = message.match(/^w(?:hen) \\[(.*?)\\],? s(?:ay) ? \\[(.*?)\\]/i);\r\n            db.getItem('calls')[match[1]] = match[2];\r\n"],[0,"        } else i"]],"start1":5279,"start2":5279,"length1":32,"length2":256},{"diffs":[[0,"      db.get"],[1,"Item"],[0,"('calls').ke"]],"start1":8407,"start2":8407,"length1":24,"length2":28}]],"length":10512,"saved":false}
{"ts":1373815551249,"patch":[[{"diffs":[[0,"ar match"],[1,"ed"],[0," = false"]],"start1":8378,"start2":8378,"length1":16,"length2":18},{"diffs":[[0,"   match"],[1,"ed"],[0," = true;"]],"start1":8542,"start2":8542,"length1":16,"length2":18},{"diffs":[[0," (!match"],[1,"ed"],[0,") {\r\n   "]],"start1":8814,"start2":8814,"length1":16,"length2":18}]],"length":10518,"saved":false}
{"ts":1373815587481,"patch":[[{"diffs":[[0,"w);\r\n}\r\n"],[1,"if (!db.getItem('calls')) {\r\n    db.setItem('calls'.substring(0,12), {});\r\n}\r\n"],[0,"var curr"]],"start1":630,"start2":630,"length1":16,"length2":94}]],"length":10596,"saved":false}
{"ts":1373815649446,"patch":[[{"diffs":[[0," {\r\n"],[-1,"                    console.log(info);\r\n"],[0,"    "]],"start1":3106,"start2":3106,"length1":48,"length2":8},{"diffs":[[0,"};\r\n"],[-1,"                          console.log(client);\r\n"],[0,"    "]],"start1":6477,"start2":6477,"length1":56,"length2":8}]],"length":10508,"saved":false}
{"ts":1373815772772,"patch":[[{"diffs":[[0,"                "],[1,"Object.keys("],[0,"db.getItem('call"]],"start1":8389,"start2":8389,"length1":32,"length2":44},{"diffs":[[0,"'calls')"],[-1,".keys"],[1,")"],[0,".forEach"]],"start1":8428,"start2":8428,"length1":21,"length2":17},{"diffs":[[0,"ls')"],[-1,".getItem("],[1,"["],[0,"item"],[-1,")"],[1,"]"],[0,";\r\n "]],"start1":8605,"start2":8605,"length1":22,"length2":14}]],"length":10508,"saved":false}
{"ts":1373815836201,"patch":[[{"diffs":[[0,"= db.get"],[1,"Item"],[0,"('calls'"]],"start1":8592,"start2":8592,"length1":16,"length2":20}]],"length":10512,"saved":false}
{"ts":1373816134273,"patch":[[{"diffs":[[0,".match(/"],[1,"^(?:!|"],[0,"Sonia: "],[1,")"],[0,"/i)||mes"]],"start1":1568,"start2":1568,"length1":23,"length2":30},{"diffs":[[0,"ch(/"],[-1,"^!"],[1,", Sonia$"],[0,"/i))"]],"start1":1606,"start2":1606,"length1":10,"length2":16},{"diffs":[[0,")/i)"],[-1,"[1];\r\n        message = message.match(/(?:Sonia: |!)(.*)"],[1,"?message.match(/(Sonia: |!)/i)[1]:message.match(/(, Sonia)$/i)[1];\r\n        message = message.match(/(Sonia: |!)/i)?message.match(/(?:Sonia: |!)(.*)/i)[1]:message.match(/(.*)(?:, Sonia)$"],[0,"/i)["]],"start1":1914,"start2":1914,"length1":64,"length2":194}]],"length":10655,"saved":false}
{"ts":1373816290978,"patch":[[{"diffs":[[0,".say(from, '"],[-1,"Set record for"],[1,"I know that"],[0," '+current.S"]],"start1":4057,"start2":4057,"length1":38,"length2":35},{"diffs":[[0,"VER.SONGTITLE+' "],[-1,"to"],[1,"is"],[0," '+db.getItem(cu"]],"start1":4103,"start2":4103,"length1":34,"length2":34},{"diffs":[[0,"m, '"],[-1,"Set record for"],[1,"I know that"],[0," '+c"]],"start1":4705,"start2":4705,"length1":22,"length2":19},{"diffs":[[0,"TITLE+' "],[-1,"to"],[1,"is"],[0," '+db.ge"]],"start1":4751,"start2":4751,"length1":18,"length2":18}]],"length":10649,"saved":false}
{"ts":1373816502547,"patch":[[{"diffs":[[0,"  sonia.say("],[-1,"chan"],[1,"to==chan?chan:from"],[0,", 'Notificat"]],"start1":3169,"start2":3169,"length1":28,"length2":42},{"diffs":[[0,"      sonia.say("],[1,"to==chan?chan:"],[0,"from, 'I know th"]],"start1":4060,"start2":4060,"length1":32,"length2":46},{"diffs":[[0,"  sonia.say("],[1,"to==chan?chan:"],[0,"from, 'I kno"]],"start1":4718,"start2":4718,"length1":24,"length2":38},{"diffs":[[0,"ow()+\".\");\r\n"],[1,"            if (db.getItem(nick.substring(0,12)+'[c')) {\r\n                sonia.say(chan, db.getItem(nick.substring(0,12)+'[c'))\r\n            }\r\n"],[0,"            "]],"start1":10134,"start2":10134,"length1":24,"length2":169}]],"length":10836,"saved":false}
{"ts":1373816846188,"patch":[[{"diffs":[[0,"if ("],[-1,"notify && "],[0,"curr"]],"start1":9499,"start2":9499,"length1":18,"length2":8},{"diffs":[[0,"TITLE))) {\r\n"],[1,"                    if (notify) {\r\n    "],[0,"            "]],"start1":9610,"start2":9610,"length1":24,"length2":63},{"diffs":[[0,"ER.SONGTITLE);\r\n"],[1,"                    }\r\n"],[0,"                "]],"start1":9730,"start2":9730,"length1":32,"length2":55}]],"length":10888,"saved":false}
{"ts":1373816964065,"patch":[[{"diffs":[[0,"      sonia.say("],[1,"("],[0,"to==chan?chan:fr"]],"start1":3165,"start2":3165,"length1":32,"length2":33},{"diffs":[[0,"han:from"],[1,")"],[0,", 'Notif"]],"start1":3192,"start2":3192,"length1":16,"length2":17},{"diffs":[[0,"      sonia.say("],[1,"("],[0,"to==chan?chan:fr"]],"start1":4062,"start2":4062,"length1":32,"length2":33},{"diffs":[[0,"==chan?chan:from"],[1,")"],[0,", 'I know that '"]],"start1":4081,"start2":4081,"length1":32,"length2":33},{"diffs":[[0,"nia.say("],[1,"("],[0,"to==chan"]],"start1":4726,"start2":4726,"length1":16,"length2":17},{"diffs":[[0,"han:from"],[1,")"],[0,", 'I kno"]],"start1":4745,"start2":4745,"length1":16,"length2":17}]],"length":10894,"saved":false}
{"ts":1373817011473,"patch":[[{"diffs":[[0,"             }\r\n"],[1,"                    if (db.getItem(result.SHOUTCASTSERVER.SONGTITLE+'[s')) {\r\n                        sonia.say(chan, db.getItem(result.SHOUTCASTSERVER.SONGTITLE+'[c'))\r\n                    }\r\n"],[0,"                "]],"start1":9759,"start2":9759,"length1":32,"length2":225}]],"length":11087,"saved":false}
{"ts":1373817014341,"patch":[[{"diffs":[[0,"TITLE+'[c'))"],[1,";"],[0,"\r\n          "]],"start1":9931,"start2":9931,"length1":24,"length2":25}]],"length":11088,"saved":false}
{"ts":1373817016401,"patch":[[{"diffs":[[0,")+'[c'))"],[1,";"],[0,"\r\n      "]],"start1":10518,"start2":10518,"length1":16,"length2":17}]],"length":11089,"saved":false}
{"ts":1373817490571,"patch":[[{"diffs":[[0," match[2];\r\n"],[1,"            sonia.say(chan, 'Got it!');\r\n"],[0,"        } el"]],"start1":5730,"start2":5730,"length1":24,"length2":65}]],"length":11130,"saved":false}
{"ts":1373817968229,"patch":[[{"diffs":[[0," match[2];\r\n"],[1,"            db.persistSync();\r\n"],[0,"            "]],"start1":5730,"start2":5730,"length1":24,"length2":55}]],"length":11161,"saved":false}
{"ts":1373818249819,"patch":[[{"diffs":[[0,"});\r\n}\r\n"],[1,"var calls= db.getItem('calls');\r\n"],[0,"var curr"]],"start1":708,"start2":708,"length1":16,"length2":49},{"diffs":[[0,"        "],[-1,"db.getItem('"],[0,"calls"],[-1,"')"],[0,"[match[1"]],"start1":5724,"start2":5724,"length1":35,"length2":21},{"diffs":[[0," db."],[-1,"persistSync("],[1,"setItem('calls', calls"],[0,");\r\n"]],"start1":5772,"start2":5772,"length1":20,"length2":30}]],"length":11190,"saved":false}
{"ts":1373818519781,"patch":[[{"diffs":[[0,"ct.keys("],[-1,"db.getItem('"],[0,"calls"],[-1,"')"],[0,").forEac"]],"start1":8695,"start2":8695,"length1":35,"length2":21},{"diffs":[[0,"ssage = "],[-1,"db.getItem('"],[0,"calls"],[-1,"')"],[0,"[item];\r"]],"start1":8858,"start2":8858,"length1":35,"length2":21}]],"length":11162,"saved":false}
{"ts":1373818538519,"patch":[[{"diffs":[[0,"ar calls"],[1," "],[0,"= db.get"]],"start1":717,"start2":717,"length1":16,"length2":17}]],"length":11163,"saved":false}
{"ts":1373818661157,"patch":[[{"diffs":[[0,"essage+'"],[1," to"],[0," you, to"]],"start1":9113,"start2":9113,"length1":16,"length2":19}]],"length":11166,"saved":false}
{"ts":1373819065957,"patch":[[{"diffs":[[0,"', calls);\r\n"],[1,"            console.log(db.getItem('calls'));\r\n"],[0,"            "]],"start1":5791,"start2":5791,"length1":24,"length2":71}]],"length":11213,"saved":false}
